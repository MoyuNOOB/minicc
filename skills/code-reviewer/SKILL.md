---
name: code-reviewer
description: 代码审查技能：聚焦正确性、性能、安全与可维护性的高价值问题。
---

# Code Reviewer Skill (Progressive)

## 触发场景
- PR/提交前后的质量审查
- 用户要求“找问题、给修复建议、给改进方向”
- 需要快速识别高风险缺陷并排序

## 快速工作流
1) 先定范围：目标文件、改动上下文、运行约束。
2) 先高后低：正确性/安全/性能优先，再看风格与可维护性。
3) 给证据：每个问题标明位置、影响、触发条件。
4) 给方案：最小可落地修复 + 回归验证建议。

## Progressive Disclosure
### Layer 1（默认）
- 输出 Top 风险问题摘要（不做全量铺开）。
- 只给最关键的修复方向。

### Layer 2（按需展开）
- 对指定问题提供详细解释、最小补丁和替代方案。
- 补充边界条件与潜在副作用。

### Layer 3（深度模式）
- 生成完整审查报告：问题分级、修复优先级、分批改造计划。

## 审查清单
- 正确性：空值/边界/异常分支、状态一致性。
- 安全性：注入、鉴权、权限绕过、敏感信息泄漏。
- 性能：N+1、重复 IO、无界循环、低效算法。
- 维护性：职责过载、重复逻辑、命名与结构清晰度。
- 可测试性：关键路径是否可覆盖、是否可 mock。

## 输出格式
- 问题摘要（按优先级排序）
- 问题详情（位置 + 影响 + 修复建议）
- 验证建议（复现/回归路径）
