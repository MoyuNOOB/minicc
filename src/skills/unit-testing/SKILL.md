---
name: unit-testing
description: 单元测试技能：围绕核心逻辑生成可维护、可执行、可验证的测试集。
---

# Unit Testing Skill (Progressive)

## 触发场景
- 用户要求补充/修复单元测试
- 需要提升覆盖率并保护回归风险
- 关键函数/组件改动后需要快速验证

## 快速工作流
1) 确定目标：函数/组件/模块与预期行为。
2) 识别依赖：外部服务、时间、随机数、IO。
3) 设计用例：正常/边界/异常/分支覆盖。
4) 实现测试：可读命名、最小 mock、稳定断言。
5) 执行验证：失败定位、覆盖率检查、回归建议。

## Progressive Disclosure
### Layer 1（默认）
- 先补核心路径测试，保证关键行为可验证。
- 输出最小可运行测试方案。

### Layer 2（按需展开）
- 扩展边界与异常场景，细化 mock 策略。
- 给出覆盖率提升路径与薄弱点。

### Layer 3（深度模式）
- 输出模块级测试治理建议（分层、夹具、测试数据策略）。

## 设计清单
- 正确性：输入输出契约、异常行为、状态变化。
- 边界性：空值、极值、非法输入、并发条件。
- 隔离性：mock 外部依赖，避免脆弱集成耦合。
- 可读性：Given-When-Then 或 Arrange-Act-Assert。
- 稳定性：去除时间/网络抖动导致的不稳定断言。

## 输出格式
- 测试计划摘要（目标 + 范围）
- 建议测试用例列表（按优先级）
- 运行/覆盖率验证步骤
